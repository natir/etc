setopt interactivecomments

# load antigen
source ~/etc/zsh/antigen.zsh

antigen use oh-my-zsh

# load ssh-key automaticly
zstyle :plugins:ssh-agent identities id_ed25519
zstyle :plugins:ssh-agent pass_path pc/$(hostname)/ssh_ed25519
antigen bundle natir/zsh-ssh-agent

antigen apply

# ssh autocompletion don't use hosts file
zstyle ':completion:*:(ssh|scp|ftp|sftp|rsync):*' hosts off

# not failled on no glob match
setopt nonomatch

# dnf alias
alias dnf="sudo dnf"
alias upgrade="dnf upgrade"

# unix cmd alias
alias ls="exa"
alias cat="bat"
alias find="fd"
alias ll="ls -la"
alias rm="rm -i"
alias cp="cp -ip"
alias mv="mv -i"

EDITOR="/usr/bin/vim"

# use user local bin
PATH=$PATH:"/home/pierre/.local/bin/"

# use rust bin
PATH=$PATH:"/home/pierre/.cargo/bin/"

# use miniconda bin
PATH=$PATH:"/home/pierre/.miniconda3/bin"

# use pep582
export PYTHONPATH='/home/pierre/.local/lib/python3.8/site-packages/pdm/pep582':$PYTHONPATH

# NPM stuff
NPM_PACKAGES="${HOME}/.npm-packages"
export PATH="$PATH:$NPM_PACKAGES/bin"
export MANPATH="${MANPATH-$(manpath)}:$NPM_PACKAGES/share/man"

# GHCup
[ -f "/home/pierre/.ghcup/env" ] && source "/home/pierre/.ghcup/env" # ghcup-env

# Starship config
TERM=xterm-256color
eval "$(starship init zsh)"

bad_network ()
{
	sudo systemctl stop dnssec-triggerd.service
}

# Doi to stuff
doi2bib ()
{
    curl -H "Accept: application/x-bibtex; charset=utf-8" https://data.crossref.org/${1}
}

# call doi2bib and write result in clipboard
doi2clip ()
{
    doi2bib ${1} | wl-copy
}

doi2altmetric ()
{
    curl "https://api.altmetric.com/v1/doi/$1" 2> /dev/null | jq .details_url
}

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/home/pierre/.miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/home/pierre/.miniconda3/etc/profile.d/conda.sh" ]; then
        . "/home/pierre/.miniconda3/etc/profile.d/conda.sh"
    else
        export PATH="/home/pierre/.miniconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<
